<idea-plugin>
    <id>cn.lupishan.agent</id>
    <name>Cursor CLI Terminal</name>
    <version>1.0.8</version>

    <vendor email="pishan.lu@gmail.com" url="https://lupishan.github.io">Max Lu</vendor>

    <!-- å…¼å®¹èŒƒå›´ï¼š232+ è¦†ç›– 2023.2 èµ·çš„å¤§å¤šæ•°ç‰ˆæœ¬ã€‚åç»­å¯å†è°ƒå¤§/å°ã€‚ -->
    <idea-version since-build="232.0" />

    <description><![CDATA[
<p><b>Cursor CLI Terminal</b> â€” Run <code>cursor-agent</code> seamlessly inside IntelliJ-based IDEs.
No more switching to external terminals.</p>

<p>åœ¨ IntelliJ IDEA / Android Studio å†…ç›´æ¥è¿è¡Œæœ¬åœ° <code>cursor-agent</code> â€”â€” æ— éœ€åˆ‡æ¢å¤–éƒ¨ç»ˆç«¯ã€‚</p>

<hr/>

<h3>âœ¨ åŠŸèƒ½äº®ç‚¹ / Key Features</h3>
<ul>
  <li><b>ä¸€é”®èšç„¦ / é‡å¯</b> â€” ç”¨ Tools â†’ Focus / Restart å¿«é€Ÿåˆ‡æ¢ç»ˆç«¯ï¼›æŒ‰ä½ Shift å³å¯é‡å»ºä¼šè¯ã€‚<br/>
      One-click focus & restart (hold Shift to clean restart).</li>
  <li><b>è‡ªåŠ¨å¯åŠ¨ / Auto-start</b> â€” PATH ä¸­æ£€æµ‹åˆ° <code>cursor-agent</code> å³è‡ªåŠ¨è¿è¡Œï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚<br/>
      Auto-starts if <code>cursor-agent</code> is on PATH.</li>
  <li><b>ç•Œé¢ç®€æ´ / Clean UI</b> â€” ç‹¬ç«‹å³ä¾§ ToolWindowï¼Œéšè—åº•éƒ¨ Terminalï¼Œé¿å…é‡å¤çª—å£ã€‚<br/>
      Dedicated right-side ToolWindow; bottom terminal stays hidden.</li>
  <li><b>æ™ºèƒ½æç¤º / Smart Hints</b> â€” æœªæ£€æµ‹åˆ° CLI æ—¶è‡ªåŠ¨æ°”æ³¡æé†’ï¼Œå®‰è£…åé‡æ–°æ‰“å¼€å³å¯ã€‚<br/>
      Balloon hints if CLI missing.</li>
</ul>

<hr/>

<h3>ğŸ›  ä½¿ç”¨åœºæ™¯ / Why Use It</h3>
<ul>
  <li>å°† <b>AI CLI</b> æ— ç¼åµŒå…¥ IDEï¼Œè¾¹å†™ä»£ç è¾¹è°ƒç”¨ AIã€‚</li>
  <li>é¿å… IDE ä¸å¤–éƒ¨ç»ˆç«¯æ¥å›åˆ‡æ¢ï¼Œæé«˜æ•ˆç‡ã€‚</li>
  <li>æ›´ç¬¦åˆæ—¥å¸¸ Cursor å·¥ä½œæµä¹ æƒ¯ã€‚</li>
</ul>

<hr/>

<p><i>Disclaimer: This plugin is an independent project and is <b>not affiliated with or endorsed by Cursor</b>.</i><br/>
<i>å…è´£å£°æ˜ï¼šæœ¬æ’ä»¶ä¸ºç‹¬ç«‹é¡¹ç›®ï¼Œä¸ Cursor æ— å…³ï¼Œä¸ä»£è¡¨å…¶ç«‹åœºæˆ–è·å¾—æˆæƒã€‚</i></p>
]]></description>

    <change-notes><![CDATA[
<h3>1.0.8</h3>
<ul>
  <li><b>API Update:</b> Replaced deprecated TerminalView with TerminalToolWindowManager for better compatibility with newer IntelliJ versions. Thanks to @hamdiwanis!<br/>
      <em>API æ›´æ–°ï¼š</em> ä½¿ç”¨ TerminalToolWindowManager æ›¿æ¢å·²åºŸå¼ƒçš„ TerminalViewï¼Œæ›´å¥½å…¼å®¹æ–°ç‰ˆ IntelliJã€‚æ„Ÿè°¢ @hamdiwanis çš„è´¡çŒ®ï¼</li>
  <li><b>Community:</b> First community contribution merged! ğŸ‰<br/>
      <em>ç¤¾åŒºï¼š</em> é¦–ä¸ªç¤¾åŒºè´¡çŒ®åˆå¹¶ï¼ğŸ‰</li>
</ul>

<h3>1.0.7</h3>
<ul>
  <li><b>Bug Fix:</b> Fixed cursor-agent detection on macOS with zsh/oh-my-zsh. Plugin now tries multiple shells (zsh, bash, sh) to properly detect cursor-agent in PATH.<br/>
      <em>Bug ä¿®å¤ï¼š</em> ä¿®å¤äº† macOS + zsh/oh-my-zsh ç¯å¢ƒä¸‹ cursor-agent æ£€æµ‹å¤±è´¥çš„é—®é¢˜ã€‚æ’ä»¶ç°åœ¨ä¼šå°è¯•å¤šä¸ª shellï¼ˆzshã€bashã€shï¼‰æ¥æ­£ç¡®æ£€æµ‹ PATH ä¸­çš„ cursor-agentã€‚</li>
  <li><b>Compatibility:</b> Better support for different shell configurations and macOS environments.<br/>
      <em>å…¼å®¹æ€§ï¼š</em> æ›´å¥½åœ°æ”¯æŒä¸åŒçš„ shell é…ç½®å’Œ macOS ç¯å¢ƒã€‚</li>
</ul>

<h3>1.0.6</h3>
<ul>
  <li><b>Code Optimization:</b> Removed all unused dependencies (Jackson, Apache HTTP) reducing plugin size by ~3MB.<br/>
      <em>ä»£ç ä¼˜åŒ–ï¼š</em> ç§»é™¤æ‰€æœ‰æœªä½¿ç”¨çš„ä¾èµ–ï¼ˆJacksonã€Apache HTTPï¼‰ï¼Œæ’ä»¶ä½“ç§¯å‡å°‘çº¦3MBã€‚</li>
  <li><b>Architecture Cleanup:</b> Deleted unused service and action classes, created shared utility class to eliminate code duplication.<br/>
      <em>æ¶æ„æ¸…ç†ï¼š</em> åˆ é™¤æœªä½¿ç”¨çš„æœåŠ¡å’ŒåŠ¨ä½œç±»ï¼Œåˆ›å»ºå…±äº«å·¥å…·ç±»æ¶ˆé™¤ä»£ç é‡å¤ã€‚</li>
  <li><b>Maintenance:</b> Simplified codebase with better structure and reduced complexity.<br/>
      <em>ç»´æŠ¤æ€§ï¼š</em> ç®€åŒ–ä»£ç åº“ï¼Œç»“æ„æ›´æ¸…æ™°ï¼Œå¤æ‚åº¦æ›´ä½ã€‚</li>
</ul>

<h3>1.0.5</h3>
<ul>
  <li><b>Platform Support Expansion:</b> Removed Java module dependency to support all IntelliJ-based IDEs (PyCharm, WebStorm, PhpStorm, etc.).<br/>
      <em>å¹³å°æ”¯æŒæ‰©å±•ï¼š</em> ç§»é™¤ Java æ¨¡å—ä¾èµ–ï¼Œæ”¯æŒæ‰€æœ‰ IntelliJ ç³»åˆ— IDEï¼ˆPyCharmã€WebStormã€PhpStorm ç­‰ï¼‰ã€‚</li>
  <li><b>Compatibility:</b> Plugin now works across the entire JetBrains IDE ecosystem, not just Java-focused IDEs.<br/>
      <em>å…¼å®¹æ€§ï¼š</em> æ’ä»¶ç°åœ¨å¯åœ¨æ•´ä¸ª JetBrains IDE ç”Ÿæ€ç³»ç»Ÿä¸­å·¥ä½œï¼Œä¸ä»…é™äº Java ç›¸å…³çš„ IDEã€‚</li>
</ul>

<h3>1.0.4</h3>
<ul>
  <li><b>Description & Onboarding:</b> Updated plugin description with structured HTML and added a clear â€œGetting Startedâ€ guide (EN/ZH).<br/>
      <em>æè¿°ä¸ä¸Šæ‰‹ï¼š</em> ä½¿ç”¨ HTML é‡å†™æ’ä»¶ä»‹ç»ï¼Œå¹¶æ–°å¢ä¸­è‹±åŒè¯­çš„ã€Œå¿«é€Ÿä¸Šæ‰‹ã€æŒ‡å¼•ã€‚</li>
  <li><b>Marketplace compliance:</b> Ensured Latin-first description and formatting to avoid single-line rendering issues.<br/>
      <em>åˆè§„ï¼š</em> æè¿°ä»¥è‹±æ–‡å¼€å¤´å¹¶ä¼˜åŒ–æ ¼å¼ï¼Œé¿å…è¢«å‹ç¼©æˆå•è¡Œçš„æ¸²æŸ“é—®é¢˜ã€‚</li>
</ul>

<h3>1.0.3</h3>
<ul>
  <li><b>æ›´æµç•… / Smoother:</b> å¯åŠ¨ä¸ç»ˆç«¯äº¤äº’ä½“éªŒè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œé¿å…é˜»å¡ UIã€‚<br/>
      Startup & terminal interaction polished for a smoother, non-blocking experience.</li>
  <li><b>æ›´æ¸…æ™° / Clearer:</b> ä¼˜åŒ–æè¿°ä¸æç¤ºä¿¡æ¯ï¼Œç”¨æˆ·ä½“éªŒæ›´ç›´è§‚ã€‚<br/>
      Improved messages & hints for clarity.</li>
</ul>

<h3>1.0.2</h3>
<ul>
  <li><b>ç»Ÿä¸€å‘½å / Unified Naming:</b> æ’ä»¶ã€å·¥å…·çª—ä¸èœå•ç»Ÿä¸€ä¸º <code>Cursor CLI Terminal</code>ã€‚<br/>
      Plugin, ToolWindow, and menus unified under the name <code>Cursor CLI Terminal</code>.</li>
  <li><b>é‡å¯æ›´å¹²å‡€ / Cleaner Restart:</b> é‡å¯åä¸å†æ®‹ç•™å›æ˜¾ï¼Œæç¤ºç¬¦ä¿æŒæ•´æ´ã€‚<br/>
      No stray command echoes after restart; prompt stays tidy.</li>
  <li><b>é˜²é‡å¤å¯åŠ¨ / Single Autorun:</b> æ¯æ¬¡ä¼šè¯ä»…è‡ªåŠ¨å¯åŠ¨ä¸€æ¬¡ï¼Œé¿å…äºŒæ¬¡å¯åŠ¨ã€‚<br/>
      Ensures only one auto-start per session.</li>
  <li><b>ç»ˆç«¯è¡Œä¸ºä¼˜åŒ– / Terminal Behavior:</b> éšè—åº•éƒ¨ Terminalï¼Œä»…ä¿ç•™å³ä¾§å·¥å…·çª—ã€‚<br/>
      Bottom Terminal stays hidden; right-side ToolWindow focused.</li>
  <li><b>æ„å»ºç¨³å®šæ€§ / Build Reliability:</b> Gradle ç­¾åå·¥å…·å…¼å®¹æ€§æ”¹è¿›ã€‚<br/>
      Safer Gradle config when signature tools unavailable.</li>
</ul>

<h3>1.0.1</h3>
<ul>
  <li><b>å¯åŠ¨æ›´å¹²å‡€ / Cleaner Startup:</b> å¯åŠ¨æ—¶ä¸å†å¤šä½™å›æ˜¾ã€‚<br/>
      No extra echoes on startup.</li>
  <li><b>ä¸€é”®é‡å¯ / One-key Restart:</b> æŒ‰ä½ <kbd>Shift</kbd> å³å¯é‡å»ºä¼šè¯ã€‚<br/>
      Hold <kbd>Shift</kbd> to rebuild session.</li>
  <li><b>åªä¿ç•™å³ä¾§ç»ˆç«¯ / Right-side Only:</b> åº•éƒ¨ Terminal é»˜è®¤éšè—ã€‚<br/>
      Bottom Terminal hidden by default.</li>
  <li><b>æœªå®‰è£…æç¤º / Missing CLI Hint:</b> æœªæ£€æµ‹åˆ° CLI æ—¶æ°”æ³¡æé†’ã€‚<br/>
      Balloon hint if CLI not installed.</li>
  <li><b>ç¨³å®šæ€§ / Stability:</b> å¯åŠ¨é€»è¾‘ç»Ÿä¸€ï¼Œé¿å…é‡å¤è¿è¡Œã€‚<br/>
      Unified startup logic, no double launches.</li>
</ul>

<h3>1.0.0</h3>
<ul>
  <li><b>åˆå§‹ç‰ˆæœ¬ / Initial Release:</b> åœ¨å³ä¾§å·¥å…·çª—å†…è¿è¡Œæœ¬åœ° <code>cursor-agent</code>ã€‚<br/>
      Run local <code>cursor-agent</code> inside right-side ToolWindow.</li>
  <li><b>è‡ªåŠ¨å¯åŠ¨ / Auto Start:</b> æ‰“å¼€å·¥å…·çª—å³è‡ªåŠ¨å¯åŠ¨ã€‚<br/>
      Opens & starts agent when ToolWindow is shown.</li>
  <li><b>èšç„¦/é‡å¯ / Focus & Restart:</b> å¿«é€Ÿèšç„¦ï¼ŒShift+ç‚¹å‡»å¯é‡å¯æ¸…ç†ä¼šè¯ã€‚<br/>
      Focus quickly; Shift+Restart for clean session.</li>
  <li><b>éå®˜æ–¹ / Unofficial:</b> æœ¬æ’ä»¶ä¸ Cursor æ— å…³ã€‚<br/>
      Not affiliated with Cursor.</li>
</ul>
]]></change-notes>

    <depends>com.intellij.modules.platform</depends>
    <depends>org.jetbrains.plugins.terminal</depends>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow
                id="Cursor CLI Terminal"
                anchor="right"
                factoryClass="cn.lupishan.agent.CursorToolWindowFactory"
                canCloseContents="true"
                icon="/icons/agent_gray.svg"/>
        <notificationGroup
                id="cursor.agent.notifications"
                displayType="BALLOON"
                isLogByDefault="true"/>
    </extensions>

    <actions>
        <action id="CursorAgent.StartAction"
                class="cn.lupishan.agent.StartCursorAgentAction"
                text="Focus / Restart Cursor CLI Terminal"
                description="Focus the ToolWindow; hold Shift to restart the session">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift A"/>
        </action>
    </actions>
</idea-plugin>
